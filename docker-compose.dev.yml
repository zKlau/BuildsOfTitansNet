services:
  # .NET API (Development with hot reload)
  api:
    image: mcr.microsoft.com/dotnet/sdk:8.0
    container_name: builds-of-titans-api-dev
    working_dir: /app
    environment:
      DB_HOST: ${DB_HOST:-localhost}
      DB_PORT: ${DB_PORT:-5432}
      DB_NAME: ${DB_NAME:-BuildsOfTitans}
      DB_USERNAME: ${DB_USERNAME:-postgres}
      DB_PASSWORD: ${DB_PASSWORD:-postgres}
      ASPNETCORE_ENVIRONMENT: ${ASPNETCORE_ENVIRONMENT:-Development}
      ASPNETCORE_URLS: http://+:8080
    ports:
      - "${API_PORT:-8080}:8080"
      - "${API_HTTPS_PORT:-8081}:8081"
    volumes:
      - ./:/app
    command: dotnet watch --verbose -- run
    restart: unless-stopped
